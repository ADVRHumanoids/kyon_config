XBotInterface:
    urdf: xacro $(ros2 pkg prefix --share kyon_urdf)/urdf/kyon.urdf.xacro upper_body:=false legs:=true varta:=true dagana:=false
    srdf: xacro $(ros2 pkg prefix --share kyon_srdf)/srdf/kyon.srdf.xacro upper_body:=false legs:=true varta:=true dagana:=false

ModelInterface:
  model_type: pin

# hal
xbotcore_device_configs:
    sim: $(rospack find kyon_config)/hal/kyon_gz.yaml
    dummy: $(ros2 pkg prefix --share kyon_config)/hal/kyon_dummy.yaml
    ec_idle: $PWD/hal/ec_all_ros2.yaml
    ec_pos: $PWD/hal/ec_all_ros2.yaml


# threads
xbotcore_threads:
    rt_main:  {sched: fifo , prio: 60, period: 0.001}
    nrt_main: {sched: other, prio: 0 , period: 0.001}
    main: {sched: other, prio: 0 , period: 0.001, main: true}


# plugins
xbotcore_plugins:

    homing:
        thread: rt_main
        type: homing

    homing_isaac:
        thread: rt_main
        type: homing
        params: 
            home: home_isaac 

    # circulo9_trajectory: 
    #    thread: rt_main
    #    type: circulo9_trajectory
    #    params:
    #        config: { value: $PWD/Trajectories.yaml, type: yamlfile}
    #        log_name: {value: p004-d0002_15kg, type: string}
    #        buffer_size: {value: 500000, type: int}
    #        use_custom_controller: false

    ros_io: 
      thread: main
      type: ros2_io
      params:
        ignore_imu: [imu_link]

    zmq_io: 
      type: zmq_io
      thread: nrt_main
      params:
        autostart: true

    ros_control: {thread: nrt_main, type: ros2_control}

    # circulo9_ros:
    #   thread: nrt_main
    #   type: circulo9_control

    # ec_ros:
    #   thread: nrt_main
    #   type: ec_ros 
    #   params:
    #     aux_type_names: [iq_out, iq_ref]

    friction_comp:
      type: friction_comp_plugin
      thread: rt_main
      params:
        fc_slope: 20.0
        fc: 0.75
        param_config: 
          value: $PWD/friction/fc_config.yaml
          type: yamlfile
      
    


# global parameters
xbotcore_param:
  /xbot/hal/joint_safety/filter_autostart: {value: true, type: bool}
  /xbot/hal/joint_safety/filter_cutoff_hz: {value: 2.0, type: double}
  /xbot/hal/enable_safety: {value: true, type: bool}
  /xbot/hal/joint_safety/filter_safe_cutoff_hz: {value: 5.0, type: double}
  /xbot/hal/joint_safety/filter_medium_cutoff_hz: {value: 20.0, type: double}
  /xbot/hal/joint_safety/filter_fast_cutoff_hz: {value: 40.0, type: double}
  /xbot/hal/joint_safety/delta_check_dt: 0.08



